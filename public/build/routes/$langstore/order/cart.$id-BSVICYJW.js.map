{
  "version": 3,
  "sources": ["../../../../../src/routes/$langstore/order/cart.$id.tsx", "../../../../../src/ui/pages/OrderPlacedCart.tsx"],
  "sourcesContent": ["import { json, LoaderFunction, HeadersFunction } from '@remix-run/node';\nimport { useLoaderData } from '@remix-run/react';\nimport { HttpCacheHeaderTaggerFromLoader, StoreFrontAwaretHttpCacheHeaderTagger } from '~/use-cases/http/cache';\nimport { getStoreFront } from '~/core/storefront.server';\nimport { getContext } from '~/use-cases/http/utils';\nimport OrderPlacedCart from '~/ui/pages/OrderPlacedCart';\n\nexport const headers: HeadersFunction = ({ loaderHeaders }) => {\n    return HttpCacheHeaderTaggerFromLoader(loaderHeaders).headers;\n};\n\nexport const loader: LoaderFunction = async ({ request, params }) => {\n    const requestContext = getContext(request);\n    const { shared } = await getStoreFront(requestContext.host);\n    return json(\n        { cartId: params.id },\n        StoreFrontAwaretHttpCacheHeaderTagger('15s', '1w', ['cart' + params.id], shared.config.tenantIdentifier),\n    );\n};\n\nexport default () => {\n    const { cartId } = useLoaderData();\n    return <OrderPlacedCart cartId={cartId} />;\n};\n", "import { useEffect, useState } from 'react';\nimport { useLocalCart } from '../hooks/useLocalCart';\nimport { ServiceAPI } from '~/use-cases/service-api';\nimport { useAppContext } from '../app-context/provider';\nimport useNavigate from '../bridge/useNavigate';\n\nexport default ({ cartId }: { cartId: string }) => {\n    const { cart: localCart, empty } = useLocalCart();\n    const [tryCount, setTryCount] = useState(0);\n    const { state: appContextState, path } = useAppContext();\n    const navigate = useNavigate();\n\n    const [orderGuestId, setOrderGuestId] = useState('');\n\n    useEffect(() => {\n        let timeout: ReturnType<typeof setTimeout>;\n        (async () => {\n            try {\n                if (localCart.cartId === cartId) {\n                    empty();\n                }\n                const cart = await ServiceAPI({\n                    language: appContextState.language,\n                    serviceApiUrl: appContextState.serviceApiUrl,\n                }).fetchCart(cartId);\n                if (cart?.extra?.orderId) {\n                    if (cart?.customer?.isGuest === true) {\n                        setOrderGuestId(cart.extra.orderId);\n                    } else {\n                        navigate(path('/order/' + cart.extra.orderId));\n                    }\n                } else {\n                    timeout = setTimeout(() => {\n                        setTryCount(tryCount + 1);\n                    }, 500 * tryCount);\n                }\n            } catch (exception) {\n                timeout = setTimeout(() => {\n                    setTryCount(tryCount + 1);\n                }, 500 * tryCount);\n            }\n        })();\n        return () => clearTimeout(timeout);\n    }, [cartId, tryCount]);\n\n    if (orderGuestId !== '') {\n        return (\n            <div className=\"min-h-[80vh] items-center flex lg:w-content mx-auto w-full\">\n                <div className=\"w-2/4 mx-auto\">\n                    <h1 className=\"font-bold text-3xl mb-2\">Order Placed!</h1>\n                    <div>\n                        <div>\n                            <p>\n                                Your order has been placed successfully, as it is a Guest Order you won't see the\n                                details here.\n                            </p>\n                            <p className=\"mt-4 text-[#6D6B69]\">\n                                Order id: <span className=\"font-italic\">{orderGuestId}</span>\n                            </p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"min-h-[80vh] items-center flex lg:w-content mx-auto w-full\">\n            <div className=\"w-2/4 mx-auto\">\n                <h1 className=\"font-bold text-3xl mb-2\">Cart Placed!</h1>\n                <div>\n                    <div>\n                        <p>Your cart has been placed successfully, we're waiting for payment confirmation.</p>\n                        <p className=\"mt-4 text-[#6D6B69]\">\n                            Id: <span className=\"font-italic\">{cartId}</span>\n                        </p>\n                        <div className=\"mt-4 flex gap-2\">\n                            <div className=\"loader \" />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n"],
  "mappings": "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",
  "names": ["import_jsx_dev_runtime"]
}
