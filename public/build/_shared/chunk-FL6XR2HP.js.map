{
  "version": 3,
  "sources": ["../../../src/ui/components/checkout-forms/magicklogin.tsx", "../../../src/ui/components/input.tsx"],
  "sourcesContent": ["import { ChangeEvent, FormEvent, useState } from 'react';\nimport { useAppContext } from '../../app-context/provider';\nimport { useAuth } from '../../hooks/useAuth';\nimport { ServiceAPI } from '~/use-cases/service-api';\nimport { Input } from '../input';\n\nexport const MagickLoginForm: React.FC<{\n    enabledGuest?: Function;\n    title: string;\n    actionTitle: string;\n    onlyLogin?: boolean;\n}> = ({ enabledGuest, title, actionTitle, onlyLogin = false }) => {\n    const { state: appContextState, path, _t } = useAppContext();\n    const { isAuthenticated, userInfos, logout } = useAuth();\n    const [formData, updateFormData] = useState({\n        firstname: userInfos?.firstname || '',\n        lastname: userInfos?.lastname || '',\n        email: userInfos?.email || '',\n    });\n\n    const handleChange = (event: ChangeEvent<HTMLInputElement>) => {\n        updateFormData({\n            ...formData,\n            [event.target.name]: event.target.value.trim(),\n        });\n    };\n    const displayOnlyLogin = onlyLogin || isAuthenticated;\n\n    return (\n        <div className=\"flex flex-col mt-5 gap-2 w-full sm:min-w-[400px]\">\n            {userInfos?.email && (\n                <div>\n                    <div className=\"bg-grey2 px-4 py-2 rounded\">\n                        <button\n                            className=\"float-right bg-[#000] text-[#fff] px-4 py-2 rounded mt-2\"\n                            onClick={() => logout()}\n                        >\n                            {_t('logout')}\n                        </button>\n                        <p className=\"clear\">\n                            <em>\n                                {_t('hello')} {userInfos?.firstname} {userInfos?.lastname} ({userInfos?.email})\n                            </em>\n                            <br />\n                            {_t('stillYourSession')}\n                        </p>\n                    </div>\n                </div>\n            )}\n            <h1 className=\"font-bold text-2xl\">\n                {title.replace('Register', isAuthenticated ? _t('login') : _t('register'))}\n            </h1>\n            <p className=\"mb-5  text-lg\">{_t('willSendYouMagickLink')}</p>\n            <form\n                onSubmit={async (event: FormEvent<HTMLFormElement>) => {\n                    event.preventDefault();\n                    const api = ServiceAPI({\n                        language: appContextState.language,\n                        serviceApiUrl: appContextState.serviceApiUrl,\n                    });\n                    if (onlyLogin) {\n                        await api.sendMagickLink(formData.email, path('/orders'));\n                    } else {\n                        await api.registerAndSendMagickLink(formData);\n                    }\n                    alert('We sent you a magick link, check your email.');\n                }}\n            >\n                {!displayOnlyLogin && (\n                    <div className=\"grid md:grid-cols-2 grid-cols-1 w-full gap-2\">\n                        <Input\n                            defaultValue={formData.firstname || userInfos?.firstname}\n                            label={_t('address.firstname')}\n                            placeholder=\"Luke\"\n                            name=\"firstname\"\n                            required\n                            onChange={handleChange}\n                        />\n\n                        <Input\n                            defaultValue={formData.lastname || userInfos?.lastname}\n                            placeholder=\"Skywalker\"\n                            label={_t('address.lastname')}\n                            name=\"lastname\"\n                            required\n                            onChange={handleChange}\n                        />\n                    </div>\n                )}\n                <div className=\"mt-2\">\n                    <Input\n                        defaultValue={formData.email || userInfos?.email}\n                        placeholder=\"luke.skywalker@rebellion.inc\"\n                        label={_t('address.email')}\n                        name=\"email\"\n                        required\n                        onChange={handleChange}\n                    />\n                </div>\n                <div className=\"flex justify-start\">\n                    {enabledGuest && (\n                        <button\n                            type=\"button\"\n                            className=\"underline px-5 py-2 ml-2 rounded mt-5 w-full\"\n                            onClick={() => {\n                                if (enabledGuest) {\n                                    enabledGuest();\n                                }\n                            }}\n                        >\n                            {_t('guestCheckout')}\n                        </button>\n                    )}\n                    <button type=\"submit\" className=\"bg-[#000] text-[#fff] px-8 py-4 rounded mt-5 w-full\">\n                        {actionTitle.replace('Register', isAuthenticated ? _t('login') : _t('register'))}\n                    </button>\n                </div>\n            </form>\n        </div>\n    );\n};\n", "import { ChangeEventHandler } from 'react';\n\nexport const Input: React.FC<{\n    placeholder: string;\n    defaultValue: any;\n    name: string;\n    onChange: ChangeEventHandler<HTMLInputElement>;\n    label: string;\n    required?: any;\n    disabled?: boolean;\n    type?: string;\n}> = ({ placeholder, defaultValue, name, onChange, label, required, disabled = false, type = 'text' }) => {\n    return (\n        <label htmlFor={name} className=\"flex flex-col frntr-input\">\n            <span>\n                {label}\n                {required && '*'}\n            </span>\n            <input\n                defaultValue={defaultValue}\n                type={type}\n                id={name}\n                placeholder={placeholder}\n                name={name}\n                onChange={onChange}\n                required={required}\n                className=\"bg-grey\"\n                disabled={disabled}\n            />\n        </label>\n    );\n};\n"],
  "mappings": "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",
  "names": ["import_jsx_dev_runtime"]
}
