{
  "version": 3,
  "sources": ["../../../src/use-cases/LanguageAndMarket.ts", "../../../src/ui/app-context/provider.tsx", "../../../src/ui/app-context/reducer.ts"],
  "sourcesContent": ["export const availableTranslationDomains = ['common'];\n\nexport const displayableLanguages = [\n    {\n        code: 'en',\n        name: 'EN',\n    },\n    {\n        code: 'no',\n        name: 'NO',\n    },\n];\nexport const availableLanguages = [\n    'en',\n    'no',\n    'fr',\n    'de',\n    'es',\n    'it',\n    'sv',\n    'da',\n    'nl',\n    'pt',\n    'pl',\n    'ru',\n    'ja',\n    'zh',\n    'ko',\n    'ar',\n    'tr',\n    'th',\n    'cs',\n    'hu',\n    'fi',\n    'el',\n    'he',\n    'id',\n    'ro',\n    'sk',\n    'uk',\n    'vi',\n    'bg',\n    'hr',\n    'lt',\n    'lv',\n    'sr',\n    'sl',\n    'et',\n    'ka',\n    'ms',\n    'hi',\n    'bn',\n    'ta',\n    'te',\n    'ml',\n    'ur',\n    'fa',\n    'ps',\n    'sw',\n    'am',\n    'km',\n    'lo',\n    'my',\n    'ne',\n    'si',\n    'pa',\n    'gu',\n    'mr',\n    'sa',\n    'kn',\n    'sd',\n    'or',\n    'as',\n    'ml',\n    'cy',\n    'is',\n    'mk',\n    'sq',\n    'bs',\n    'mt',\n    'af',\n    'az',\n    'be',\n    'bn',\n    'bs',\n    'ca',\n    'cs',\n    'cy',\n    'da',\n    'de',\n    'el',\n    'en',\n    'es',\n    'et',\n    'fa',\n    'fi',\n    'fr',\n    'gu',\n    'he',\n    'hi',\n    'hr',\n    'hu',\n    'hy',\n    'id',\n    'is',\n    'it',\n    'ja',\n    'ka',\n    'km',\n    'kn',\n    'ko',\n    'lt',\n    'lv',\n    'mk',\n    'ml',\n    'mr',\n    'ms',\n    'ne',\n    'nl',\n    'no',\n    'or',\n    'pa',\n    'pl',\n    'ps',\n    'pt',\n    'ro',\n    'ru',\n    'sa',\n    'sd',\n    'si',\n    'sk',\n    'sl',\n    'sq',\n    'sr',\n    'sv',\n    'sw',\n    'ta',\n    'te',\n    'th',\n    'tr',\n    'uk',\n    'ur',\n    'vi',\n    'zh',\n];\nexport const availableMarkets = [];\n\nexport const isValidLanguage = (language: string) => availableLanguages.includes(language);\n\nexport const isValidMarket = (market?: string) => {\n    if (!market) {\n        return true;\n    }\n    if (availableMarkets.length === 0) {\n        return true;\n    }\n    //@ts-ignore\n    return availableMarkets.includes(market);\n};\nexport const isValidLanguageMarket = (language: string, market?: string) => {\n    if (!isValidLanguage(language)) {\n        return false;\n    }\n    if (!isValidMarket(market)) {\n        return false;\n    }\n    return true;\n};\n\nexport const buildLanguageMarketAwareLink = (path: string, language: string, market?: string): string => {\n    if (!isValidLanguageMarket(language, market)) {\n        throw new Error(`Invalid language (${language}) or market (${market})`);\n    }\n\n    if (market && market.length > 0) {\n        return `/${language}-${market}${path}`;\n    }\n\n    return `/${language}${path}`;\n};\n", "import * as React from 'react';\nimport { createContext, FunctionComponent, useContext, useReducer } from 'react';\nimport { buildLanguageMarketAwareLink } from '~/use-cases/LanguageAndMarket';\nimport { mapToReducerActions, Reducer } from './reducer';\nimport { Actions, Dispatch, State } from './types';\n\nconst StateContext = createContext<State | undefined>(undefined);\nconst DispatchContext = createContext<Dispatch | undefined>(undefined);\nconst TranslationsContext = createContext<Record<string, string> | undefined>(undefined);\n\ntype InitialState = Omit<State, 'latestAddedCartItems'>;\n\nconst initiateState = (initialState: InitialState): State => {\n    return {\n        ...initialState,\n        latestAddedCartItems: [],\n    };\n};\n\nexport const AppContextProvider: FunctionComponent<{\n    children: React.ReactNode;\n    initialState: InitialState;\n    translations: Record<string, string>;\n}> = ({ children, initialState, translations }) => {\n    const [state, dispatch] = useReducer(Reducer, initiateState(initialState));\n    return (\n        <TranslationsContext.Provider value={translations}>\n            <StateContext.Provider value={state}>\n                <DispatchContext.Provider value={dispatch}>{children}</DispatchContext.Provider>\n            </StateContext.Provider>\n        </TranslationsContext.Provider>\n    );\n};\n\nfunction useAppContextState() {\n    const context = useContext(StateContext);\n    if (context === undefined) {\n        throw new Error('useAppContextState must be used within the AppContextProvider.');\n    }\n    return context;\n}\n\nfunction useAppContextDispatch() {\n    const context = useContext(DispatchContext);\n    if (context === undefined) {\n        throw new Error('useAppContextDispatch must be used within the AppContextProvider.');\n    }\n    return context;\n}\n\nexport function useAppContext(): {\n    state: State;\n    dispatch: Actions;\n    path: (path: string) => string;\n    _t: (key: string, options?: Record<string, any>) => string;\n} {\n    const translationContext = useContext(TranslationsContext);\n    const actions = mapToReducerActions(useAppContextDispatch());\n    const state = useAppContextState();\n\n    const translate = (key: string, options?: Record<string, any>): string => {\n        if (!translationContext) {\n            return key;\n        }\n        const translated = translationContext[key as keyof typeof translationContext] || key;\n        if (!options) {\n            return translated;\n        }\n\n        return Object.entries(options).reduce((acc, [key, value]) => {\n            return acc.replace(`{{${key}}}`, value);\n        }, translated);\n    };\n\n    return {\n        state,\n        dispatch: actions,\n        _t: translate,\n        path: (path: string) => buildLanguageMarketAwareLink(path, state.language, state.market),\n    };\n}\n", "import { Action, Actions, Dispatch, State } from './types';\n\nexport function Reducer(state: State, action: Action) {\n    switch (action.type) {\n        case 'ADD_ITEMS_TO_CART': {\n            return {\n                ...state,\n                latestAddedCartItems: action.items,\n            };\n        }\n        case 'RESET_LAST_ADDED_ITEMS': {\n            return {\n                ...state,\n                latestAddedCartItems: [],\n            };\n        }\n        default: {\n            throw new Error('AppContext - Unhandled action type');\n        }\n    }\n}\n\nexport function mapToReducerActions(dispatch: Dispatch): Actions {\n    return {\n        addItemsToCart: (items: any[]) => dispatch({ type: 'ADD_ITEMS_TO_CART', items }),\n        resetLastAddedItems() {\n            dispatch({ type: 'RESET_LAST_ADDED_ITEMS' });\n        },\n    };\n}\n"],
  "mappings": ";;;;;;;;;AAEO,IAAM,uBAAuB;AAAA,EAChC;AAAA,IACI,MAAM;AAAA,IACN,MAAM;AAAA,EACV;AAAA,EACA;AAAA,IACI,MAAM;AAAA,IACN,MAAM;AAAA,EACV;AACJ;AACO,IAAM,qBAAqB;AAAA,EAC9B;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;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",
  "names": ["key"]
}
