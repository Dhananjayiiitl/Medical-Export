{
  "version": 3,
  "sources": ["../../../src/ui/pages/LandingPage.tsx"],
  "sourcesContent": ["import { HeadersFunction, json, LinksFunction, LoaderFunction, MetaFunction } from '@remix-run/node';\nimport { useLoaderData } from '@remix-run/react';\nimport dataFetcherForShapePage from '~/core/dataFetcherForShapePage.server';\nimport splideStyles from '@splidejs/splide/dist/css/themes/splide-default.min.css';\nimport { HttpCacheHeaderTaggerFromLoader, StoreFrontAwaretHttpCacheHeaderTagger } from '~/use-cases/http/cache';\nimport { getStoreFront } from '~/core/storefront.server';\nimport { CrystallizeAPI } from '~/use-cases/crystallize/read';\nimport { buildMetas } from '~/use-cases/MicrodataBuilder';\nimport { getContext } from '~/use-cases/http/utils';\n\n\nexport const links: LinksFunction = () => {\n    return [{ rel: 'stylesheet', href: splideStyles }];\n};\n\nexport let meta: MetaFunction = ({ data }) => {\n    return buildMetas(data);\n};\n\nexport const headers: HeadersFunction = ({ loaderHeaders }) => {\n    return HttpCacheHeaderTaggerFromLoader(loaderHeaders).headers;\n};\n\nexport const loader: LoaderFunction = async ({ request, params }) => {\n    const requestContext = getContext(request);\n    const { shared, secret } = await getStoreFront(requestContext.host);\n    const path = '/' + params['*'];\n    const crystallizePath = path.replace('.pdf', '');\n    const api = CrystallizeAPI({\n        apiClient: secret.apiClient,\n        language: requestContext.language,\n        isPreview: requestContext.isPreview,\n    });\n    const map = await api.fetchTreeMap();\n    const mappedKey = Object.keys(map).find((key: string) => key === crystallizePath);\n    if (!mappedKey) {\n        throw new Response('Not Found', {\n            status: 404,\n        });\n    }\n\n    const shapeIdentifier = map[mappedKey as keyof typeof map]?.shape?.identifier || '_topic';\n    const data = await dataFetcherForShapePage(shapeIdentifier, path, requestContext, params);\n\n    return json(\n        { shapeIdentifier, data },\n        StoreFrontAwaretHttpCacheHeaderTagger('15s', '1w', [path], shared.config.tenantIdentifier),\n    );\n};\n\nexport default () => {\n    const { data, shapeIdentifier } = useLoaderData();\n    console.log('njsfnsjbfjasbfafa')\n    return <div>yo</div>;\n};\n"],
  "mappings": ";;;;;;;;;;;;;;;AAEA,qCAAoC;AAGpC,wBAA8B;AAgDnB;AAHX,IAAO,sBAAQ,MAAM;AACjB,QAAM,EAAE,MAAM,gBAAgB,IAAI,cAAc;AAChD,UAAQ,IAAI,mBAAmB;AAC/B,SAAO,mDAAC,SAAI,kBAAL;AAAA;AAAA;AAAA;AAAA,SAAO;AAClB;",
  "names": []
}
